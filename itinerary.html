<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Itinerary</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>My Travel Itinerary</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="itinerary.html">Itinerary</a>
      <a href="favorites.html">Favorites</a>
    </nav>
  </header>

  <main>
    <section class="search-section">
      <p>Your saved destinations are listed below. You can remove items or return to add more.</p>
    </section>

    <h2 class="section-title">Saved Destinations</h2>
    <section class="destination-grid" id="itinerary-list">
      <!-- Cards will be injected here by JavaScript -->
    </section>

    <!-- Map Section -->
    <h2 class="section-title">Map View</h2>
    <div id="map" style="height:400px; border:1px solid #ddd; border-radius:8px; margin:20px 0;">
      <!-- Google Map will be embedded here -->
    </div>
  </main>

  <footer>
    <p>&copy; 2025 Travel Planner. All rights reserved.</p>
  </footer>

  <script>
    // Load itinerary from localStorage
    const itinerary = JSON.parse(localStorage.getItem("itinerary")) || [];
    const list = document.getElementById("itinerary-list");

    if (itinerary.length === 0) {
      list.innerHTML = "<p>No destinations added yet.</p>";
    } else {
      itinerary.forEach(destination => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <h3>${destination}</h3>
          <p>This destination was added to your itinerary.</p>
          <button onclick="removeDestination('${destination}')">Remove</button>
        `;
        list.appendChild(card);
      });
    }

    // Remove destination
    function removeDestination(name) {
      let itinerary = JSON.parse(localStorage.getItem("itinerary")) || [];
      itinerary = itinerary.filter(item => item !== name);
      localStorage.setItem("itinerary", JSON.stringify(itinerary));
      location.reload(); // Refresh to update the list
    }

    // Coordinates and descriptions for known destinations
    const destinationData = {
      "Victoria Falls": {
        lat: -17.9243,
        lng: 25.8560,
        info: "Scenic waterfall tours and adventure activities."
      },
      "Nyanga National Park": {
        lat: -18.2833,
        lng: 32.7500,
        info: "Mountain hiking trails and cool climate."
      },
      "Great Zimbabwe Ruins": {
        lat: -20.2675,
        lng: 30.9333,
        info: "Ancient stone architecture and cultural heritage."
      },
      "Lake Kariba": {
        lat: -16.5167,
        lng: 28.8000,
        info: "Houseboat cruises and sunset views."
      },
      "Matobo Hills": {
        lat: -20.5000,
        lng: 28.5000,
        info: "Granite formations and spiritual rock art sites."
      }
    };

    // Initialize Google Map
    function initMap() {
      const map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: -18.5, lng: 30.9 }, // Central Zimbabwe
        zoom: 6,
      });

      itinerary.forEach(destination => {
        const data = destinationData[destination];
        if (data) {
          const marker = new google.maps.Marker({
            position: { lat: data.lat, lng: data.lng },
            map,
            title: destination
          });

          const infoWindow = new google.maps.InfoWindow({
            content: `<strong>${destination}</strong><br>${data.info}`
          });

          marker.addListener("click", () => {
            infoWindow.open(map, marker);
          });
        }
      });
    }
  </script>

  <!-- Google Maps API script with your actual key -->
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCaHC6mCg0k7y6SrL2856zzcQzF8jT1pNQ&callback=initMap">
  </script>
</body>
</html>